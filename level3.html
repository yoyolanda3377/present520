
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>第三封：定番究极二选一 💞</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Helvetica Neue', sans-serif;
      background-color: #fff0f5;
      color: #333;
      padding: 20px;
      text-align: center;
    }
    h1 {
      color: #ff6699;
    }
    .question {
      display: none;
      margin-top: 30px;
    }
    .question.active {
      display: block;
    }
    .question p {
      font-size: 1.2rem;
      color: #ff6699;
      margin-bottom: 10px;
    }
    label {
      display: block;
      margin: 10px 0;
      font-size: 1.1rem;
      color: #cc3366;
      cursor: pointer;
    }
    .next-btn {
      display: inline-block;
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #ff99bb;
      color: white;
      text-align: center;
      text-decoration: none;
      border-radius: 8px;
      font-size: 1rem;
      transition: background-color 0.3s ease;
    }

    .next-btn:hover {
      background-color: #ff6699;
    }
    #resultModal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 100;
    }
    .modal-content {
      background: #fff0f5;
      margin: 8% auto;
      padding: 20px;
      width: 90%;
      max-width: 400px;
      border-radius: 12px;
      color: #cc3366;
      text-align: left;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }
    .to-next {
      display: block;
      margin-top: 20px;
      background-color: #ff99bb;
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      text-align: center;
      text-decoration: none;
    }
    .top-left-btn {
      position: absolute;
      top: 16px;
      left: 16px;
      z-index: 999;
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 999;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.5);
    }
.love-toggle {
  margin: 20px auto;
  padding: 8px 16px;
  background-color: #ffb6c1;
  color: white;
  border: none;
  border-radius: 10px;
  font-size: 1rem;
  cursor: pointer;
  display: inline-block;
  transition: background-color 0.3s ease;
}
.love-toggle:hover {
  background-color: #ff80a6;
}
.close {
      color: #aaa;
      float: right;
      font-size: 1.4rem;
      font-weight: bold;
      cursor: pointer;
    }
    .close:hover {
      color: #333;
    }

  </style>
</head>
<body>
  <button class="next-btn top-left-btn" onclick="window.location.href='index.html'">返回主页 🏠</button>
  <h1>第三封：定番究极二选一 💞</h1>
   <p>“如果你是我，你会怎么做？”</p>
  <div id="quiz"></div>
<!-- 💌 情书按钮 -->
<button id="showLoveBtn" class="love-toggle" style="display:none;">💌 情书</button>

<!-- 💌 情书弹窗 -->
<div id="loveModal" class="modal">
  <div class="modal-content">
    <span id="closeLoveModal" class="close">&times;</span>
    <p style="margin-top: 10px;">宝宝，我们其实也有很多不一样的地方：<br>
    爱好不一样、习惯也不一样，生活的环境不一样，成长的过程也不一样<br>
    有时我话太多你跟不上，有时你回消息慢得像在加载中🙄<br><br>
    可就是这样，我发现你开始愿意为了我认真思考要怎么回我一句话，<br>
    虽然偶尔还是有点“人机”既视感（笑），但已经不是原来的直男宝宝啦～<br><br>
    大概是世界让我们相遇，然后用最温柔的方式<br>
    把我变成更像你的我，也把你带进了我的小世界里。💕</p>
    <a href="level4.html" class="to-next">下一封 →</a>
  </div>
</div>

<!-- 游戏结果弹窗 -->
<div id="resultModal">
  <div class="modal-content" id="resultText"></div>
</div>

<script>
const questions = [
  {
    q: "1. 出门要喝饮料，你觉得我更常点哪种？",
    options: ["🧋 奶茶加布丁加仙草加珍珠", "🥤 美式加冰不加糖（装酷专用）"],
    correct: 0
  },
  {
    q: "2. 收到我信息时，我没回你，你通常怎么想？",
    options: ["⌛ 她在忙，等等她就好～", "😱 她是不是在气我了！！！"],
    correct: 1
  },
  {
    q: "3. 和我一起出门游玩，我更喜欢？",
    options: ["📸 拍照打卡发朋友圈", "🍡 蹲在角落吃零食看人来人往"],
    correct: 0
  },
  {
    q: "4. 我生气了但不说话，你会？",
    options: ["😶 默默等我冷静", "😬 拼命哄我、用搞笑语气套话"],
    correct: 1
  },
  {
    q: "5. 如果我说“我困了”，其实我想？",
    options: ["😴 你主动说晚安然后继续黏我", "🛌 真的让我安静睡觉"],
    correct: 0
  },
  {
    q: "6. 情侣网页或小游戏，我更在乎？",
    options: ["🎮 内容好玩、机制有趣", "💞 有没有你参与、有没有仪式感"],
    correct: 1
  },
  {
    q: "7. 我生日你忘了，我最可能的反应？",
    options: ["😭 表面说没事但其实很伤心", "😤 凶你一顿然后自己准备补礼物给你"],
    correct: 0
  },
  {
    q: "8. 约好通话但你迟到了，我会？",
    options: ["📵 秒挂电话假装生气", "📸 一边等你一边截图留证据"],
    correct: 1
  },
  {
    q: "9. 外卖选项只有这两个，我会选？",
    options: ["🔥 火锅，永远是火锅", "🍖 烤肉，烧烤香香香！"],
    correct: 0
  },
  {
    q: "10. 如果能一起去旅行一次，我最想？",
    options: ["🧳 去没去过的地方重新认识彼此", "📍 去去过的地方，把回忆再走一遍"],
    correct: 0
  }
];


let current = 0;
let score = 0;

const quizContainer = document.getElementById("quiz");

function renderQuestion() {
  quizContainer.innerHTML = "";
  const q = questions[current];
  const div = document.createElement("div");
  div.className = "question active";
  div.innerHTML = `<p>${q.q}</p>`;
  q.options.forEach((opt, i) => {
    const label = document.createElement("label");
    label.innerHTML = `<input type="radio" name="q${current}" value="${i}"> ${opt}`;
    label.querySelector("input").addEventListener("change", () => {
      document.getElementById("nextBtn").disabled = false;
      label.parentNode.querySelectorAll("label").forEach(l => l.style.background = "");
      label.style.background = "#ffeef3";
      label.style.borderRadius = "6px";
    });
    div.appendChild(label);
  });
  const nextBtn = document.createElement("button");
  nextBtn.id = "nextBtn";
  nextBtn.textContent = "下一题 →";
  nextBtn.disabled = true;
  nextBtn.className = "next-btn";
  nextBtn.onclick = () => {
    const selected = div.querySelector("input[type='radio']:checked");
    if (selected && parseInt(selected.value) === q.correct) score++;
    current++;
    if (current < questions.length) {
      renderQuestion();
    } else {
      showResult();
    }
  };
  div.appendChild(nextBtn);
  quizContainer.appendChild(div);
}

function showResult() {
  const modal = document.getElementById("resultModal");
  const resultText = document.getElementById("resultText");
  let feedback = "";

  if (score >= 9) {
    feedback = "满分宝宝，不愧是你！💯";
  } else if (score >= 6) {
    feedback = "怎么说，是不是开小差啦😳";
  } else if (score >= 3) {
    feedback = "阿这你你你欺负我🥺";
  } else {
    feedback = "就地处决！🤬";
  }

  resultText.innerHTML = `<p>默契得分：${score} / ${questions.length}</p><p>${feedback}</p>`;
  modal.style.display = "block";
  document.getElementById("showLoveBtn").style.display = "inline-block";
  localStorage.setItem("level3Cleared", "true");
}

renderQuestion();
if (localStorage.getItem("level3Cleared") === "true") {
  document.getElementById("showLoveBtn").style.display = "inline-block";
}
document.getElementById("showLoveBtn").addEventListener("click", function () {
  document.getElementById("loveModal").style.display = "block";
});

document.getElementById("closeLoveModal").addEventListener("click", function () {
  document.getElementById("loveModal").style.display = "none";
});

</script>
</body>
</html>
